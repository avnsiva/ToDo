<!doctype html>
<html>

<head>
    <title>To Do</title>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> 
</head>

<body>
    <button onclick="myFunction()" class="dropbtn">Dropdown</button>
<select id="Category" name="Category">
  <option value="Home Expenses">Home Expenses</option>
  <option value="Diapers">Diapers</option>
  <option value="Telephone Bills">Telephone Bills</option>
  <option value="EB Bills">EB Bills</option>
  <option value="Eating Out">Eating Out</option>
  <option value="Fuel">Fuel</option>
  <option value="Automobile">Automobile</option>
  </select>
  <select id="PMode" name="PMode">
  <option value="Credit Card">Credit Card</option>
  <option value="Cash">Cash</option>
  </select>
  <input type="number" id="expensevalue"/>
  <input type="number" id="dateis"/>
  <button id="Save">Save</button>
    
    <script>
            $('#Save').click(function() {
                localStorage.clear;
                var baseJson =  {"expenserecord" : [ {"dummydata" : "0"} ]};
                //alert("base is " + base);
                //var baseJson = JSON.parse(base);
                alert("basejson is " + baseJson);
                localStorage.setItem("Expenses1" , JSON.stringify(baseJson));
                alert("localstorage is " + localStorage.getItem("Expenses1"));
                var pMode = document.getElementById("PMode");
                var Catetory = document.getElementById("Category");
                var recooJson = {"Amount" : document.getElementById("expensevalue").value,"Date" : document.getElementById("dateis").value, "PMode" : pMode.options[pMode.selectedIndex].value, "Category" :  Catetory.options[Catetory.selectedIndex].value};
                //alert("recoo is " + recoo);
                //var recooJson = JSON.parse(recoo);
                alert("Recoo JSON is" + recooJson);
                var tranRecord = JSON.parse(localStorage.getItem("Expenses1"));
                alert("tranrecord is" + tranRecord);
                alert("tranrecord in string is" + JSON.stringify(tranRecord));
                tranRecord.expenserecord.push(recooJson);
                alert("tranrecord after pushing a new record is" + JSON.stringify(tranRecord));
                localStorage.removeItem("Expenses1");
                localStorage.setItem("Expenses1", JSON.stringify(tranRecord));
                alert("localstorage is " + localStorage.getItem("Expenses1"));
            })
                </script>                                       
</body>

</html>
